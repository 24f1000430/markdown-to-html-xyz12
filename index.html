index.html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Markdown Editor with Tabs and Word Count</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #60a5fa;
      --accent-2: #7dd3fc;
      --border: #1f2937;
      --btn: #0b1220;
      --btn-active: #111827;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: linear-gradient(180deg, #0b1220, var(--bg));
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      padding: 1.25rem 1rem 0.75rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      justify-content: space-between;
    }
    header h1 {
      margin: 0;
      font-size: 1.1rem;
      font-weight: 700;
      letter-spacing: 0.3px;
      color: #f3f4f6;
    }
    .toolbar {
      padding: 0 1rem 0.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(6px);
    }
    #markdown-tabs {
      display: inline-flex;
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 4px;
      gap: 4px;
    }
    #markdown-tabs button {
      appearance: none;
      border: 1px solid transparent;
      background: var(--btn);
      color: var(--muted);
      padding: 0.5rem 0.9rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.2px;
      transition: all 0.15s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    #markdown-tabs button:hover {
      color: #e2e8f0;
      border-color: #1f2a44;
    }
    #markdown-tabs button[aria-selected="true"] {
      color: #e8f1ff;
      background: linear-gradient(180deg, var(--btn-active), #0e1628);
      border-color: #273248;
      box-shadow: 0 0 0 1px rgba(96,165,250,0.15) inset, 0 1px 0 rgba(255,255,255,0.05);
    }

    .stats {
      color: var(--muted);
      font-size: 0.95rem;
    }
    .stats strong {
      color: #e5f0ff;
    }

    .wrapper {
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 0;
      flex: 1 1 auto;
      min-height: 0;
    }
    .panels {
      position: relative;
      height: 100%;
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 1fr;
    }
    .panel {
      grid-area: 1 / 1;
      overflow: auto;
      border-top: 1px solid var(--border);
      background: linear-gradient(180deg, #0d1628, var(--panel));
      padding: 1rem;
    }
    .panel.hidden {
      display: none;
    }

    textarea#markdown-input {
      width: 100%;
      height: calc(100vh - 210px);
      min-height: 320px;
      resize: vertical;
      background: #0b1220;
      color: #e5e7eb;
      border: 1px solid #1f2937;
      border-radius: 10px;
      padding: 1rem 1rem 1.25rem;
      line-height: 1.5;
      font-size: 1rem;
      outline: none;
      box-shadow: 0 0 0 0 rgba(0,0,0,0);
      transition: box-shadow 0.15s ease, border-color 0.15s ease;
    }
    textarea#markdown-input:focus {
      border-color: #28446b;
      box-shadow: 0 0 0 3px rgba(96,165,250,0.2);
    }

    /* Rendered HTML styles */
    #rendered-html {
      max-width: 80ch;
      margin: 0 auto;
      padding: 0.5rem 0.25rem 4rem;
    }
    #rendered-html h1, #rendered-html h2, #rendered-html h3,
    #rendered-html h4, #rendered-html h5, #rendered-html h6 {
      line-height: 1.25;
      margin: 1.2em 0 0.6em;
      color: #e8f1ff;
    }
    #rendered-html p {
      color: #dbe4f3;
      line-height: 1.7;
    }
    #rendered-html a {
      color: var(--accent);
      text-decoration: none;
      border-bottom: 1px dashed rgba(96,165,250,0.5);
    }
    #rendered-html a:hover {
      color: #93c5fd;
      border-bottom-style: solid;
    }
    #rendered-html code {
      background: #0b1220;
      border: 1px solid #1f2937;
      padding: 0.15rem 0.35rem;
      border-radius: 6px;
      color: #f8fafc;
    }
    #rendered-html pre code {
      display: block;
      padding: 1rem;
      overflow: auto;
    }
    #rendered-html ul, #rendered-html ol {
      padding-left: 1.2em;
    }
    #rendered-html blockquote {
      border-left: 3px solid #28446b;
      padding-left: 0.9em;
      color: #c6d2e6;
      margin: 1em 0;
      background: rgba(40,68,107,0.12);
    }

    footer {
      padding: 0.75rem 1rem 1.25rem;
      color: #94a3b8;
      font-size: 0.9rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    .kbd {
      border: 1px solid #2b3a55;
      background: #0b1220;
      border-radius: 6px;
      padding: 0 0.35rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: #c9e2ff;
    }

    @media (max-width: 720px) {
      #rendered-html { max-width: 100%; }
      textarea#markdown-input { height: calc(100vh - 260px); }
    }
  </style>
</head>
<body>
  <header>
    <h1>Markdown Viewer</h1>
  </header>

  <div class="toolbar">
    <div id="markdown-tabs" role="tablist" aria-label="Markdown view tabs">
      <button id="tab-html" role="tab" aria-selected="false" aria-controls="html-panel" data-target="html-panel" title="Show rendered HTML">
        HTML
      </button>
      <button id="tab-source" role="tab" aria-selected="true" aria-controls="source-panel" data-target="source-panel" title="Show markdown source">
        Source
      </button>
    </div>

    <div class="stats">
      Words: <strong id="markdown-word-count">0</strong>
    </div>
  </div>

  <main class="wrapper">
    <div class="panels">
      <section id="html-panel" class="panel hidden" role="tabpanel" aria-labelledby="tab-html">
        <div id="rendered-html" aria-live="polite"></div>
      </section>

      <section id="source-panel" class="panel" role="tabpanel" aria-labelledby="tab-source">
        <textarea id="markdown-input" spellcheck="true" placeholder="# Welcome!

Type markdown on the Source tab. Switch to HTML to preview."></textarea>
      </section>
    </div>
  </main>

  <footer>
    <div>Tip: Use the tabs above to switch between your markdown source and the rendered HTML.</div>
    <div><span class="kbd">Ctrl/Cmd</span> + <span class="kbd">Enter</span> toggles tabs</div>
  </footer>

  <!-- Marked (Markdown parser) and DOMPurify (sanitize) -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" integrity="sha384-1lEc/E8DGM3gF7k8Tmhvo8sdrwNsZ8HkZEtgX6oFE/Wi0A6YasORD3zvU0v/69gS" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js" integrity="sha384-hExh/HS5xRNP47M2kgHMLxO3h4Hj6cKkOs/ZLiPNQoQad0Hryy1olIrK2e+x2Prf" crossorigin="anonymous"></script>

  <script>
    (function () {
      const tabsEl = document.getElementById('markdown-tabs');
      const btnHTML = document.getElementById('tab-html');
      const btnSource = document.getElementById('tab-source');
      const panels = {
        html: document.getElementById('html-panel'),
        source: document.getElementById('source-panel')
      };
      const input = document.getElementById('markdown-input');
      const output = document.getElementById('rendered-html');
      const countEl = document.getElementById('markdown-word-count');

      // Seed with starter content
      const starter = `# Markdown Demo

This is a live markdown editor:
- Type in the Source tab.
- See the result in the HTML tab.
- Word count updates as you type.

Inline styles: **bold**, *italic*, \`code\`, and [a link](https://example.com).

> Quote blocks work too.

1. Lists
2. Headings
3. Links
4. Code

\`\`\`js
function hello(name) {
  console.log('Hello, ' + name + '!');
}
hello('world');
\`\`\`
`;
      input.value = starter;

      // Configure marked
      if (window.marked) {
        marked.setOptions({
          breaks: true,
          gfm: true,
          mangle: false,
          headerIds: true
        });
      }

      function countWords(text) {
        // Count tokens separated by whitespace; ignore empty strings
        const tokens = text
          .replace(/[\u200B-\u200D\uFEFF]/g, '')
          .trim()
          .split(/\s+/)
          .filter(Boolean);
        return tokens.length;
      }

      function render() {
        const md = input.value;
        let html = '';
        try {
          html = window.marked ? marked.parse(md) : md
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/\n/g, '<br>');
        } catch (e) {
          html = '<pre style="color:#fca5a5">Error rendering markdown</pre>';
          console.error(e);
        }
        // Sanitize before injecting
        const safe = window.DOMPurify ? DOMPurify.sanitize(html) : html;
        output.innerHTML = safe;
      }

      function updateWordCount() {
        const words = countWords(input.value);
        countEl.textContent = words.toString();
      }

      function setActiveTab(targetId) {
        const showHTML = targetId === 'html-panel';

        // Update aria-selected
        btnHTML.setAttribute('aria-selected', showHTML ? 'true' : 'false');
        btnSource.setAttribute('aria-selected', showHTML ? 'false' : 'true');

        // Toggle panels
        panels.html.classList.toggle('hidden', !showHTML);
        panels.source.classList.toggle('hidden', showHTML);

        // Render when switching to HTML tab to ensure freshness
        if (showHTML) render();
      }

      // Event: input -> update preview (if HTML visible) and word count
      input.addEventListener('input', () => {
        updateWordCount();
        // Live update preview regardless of current tab so it's ready
        render();
      });

      // Tabs click handling
      tabsEl.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-target]');
        if (!btn) return;
        const targetId = btn.getAttribute('data-target');
        setActiveTab(targetId);
      });

      // Keyboard shortcut: Ctrl/Cmd + Enter toggles tabs
      window.addEventListener('keydown', (e) => {
        const isToggle = (e.key === 'Enter' || e.keyCode === 13) && (e.ctrlKey || e.metaKey);
        if (!isToggle) return;
        e.preventDefault();
        const isHTMLVisible = !panels.html.classList.contains('hidden');
        setActiveTab(isHTMLVisible ? 'source-panel' : 'html-panel');
      });

      // Initial render + count
      updateWordCount();
      render();

      // Ensure default selected is Source
      setActiveTab('source-panel');
    })();
  </script>
</body>
</html>